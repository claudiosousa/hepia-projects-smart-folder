\hypertarget{parser_8h}{}\section{parser.\+h File Reference}
\label{parser_8h}\index{parser.\+h@{parser.\+h}}


Parses a string expression and return a formal representation.  


{\ttfamily \#include $<$stdlib.\+h$>$}\\*
Include dependency graph for parser.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=132pt]{parser_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{parser_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structparser__t}{parser\+\_\+t}
\begin{DoxyCompactList}\small\item\em Formal expression representation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structparser__t}{parser\+\_\+t} \hyperlink{parser_8h_a402117b92426b41469190a0d4d4397f0}{parser\+\_\+t}
\begin{DoxyCompactList}\small\item\em Formal expression representation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{parser_8h_a32088e9f194a33e050822b8c536e03cb}{parser\+\_\+crit\+\_\+type\+\_\+t} \{ {\bfseries O\+P\+E\+R\+A\+T\+OR} = 1 $<$$<$ 7, 
{\bfseries P\+A\+R\+E\+N\+T\+H\+E\+S\+IS} = 1 $<$$<$ 6, 
{\bfseries C\+R\+I\+T\+E\+R\+IA} = 1 $<$$<$ 5
 \}\begin{DoxyCompactList}\small\item\em Type of expression token. \end{DoxyCompactList}
\item 
enum \hyperlink{parser_8h_a4dcbe7148b91f50b0e7f3e08e780861d}{parser\+\_\+crit\+\_\+t} \{ \\*
{\bfseries OR} = O\+P\+E\+R\+A\+T\+OR, 
{\bfseries A\+ND}, 
{\bfseries N\+OT}, 
{\bfseries N\+A\+ME} = C\+R\+I\+T\+E\+R\+IA $\vert$ 3, 
\\*
{\bfseries U\+S\+ER}, 
{\bfseries G\+R\+O\+UP}, 
{\bfseries P\+E\+RM}, 
{\bfseries S\+I\+ZE}, 
\\*
{\bfseries A\+T\+I\+ME}, 
{\bfseries M\+T\+I\+ME}, 
{\bfseries C\+T\+I\+ME}, 
{\bfseries L\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS} = P\+A\+R\+E\+N\+T\+H\+E\+S\+IS, 
\\*
{\bfseries R\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS}
 \}\begin{DoxyCompactList}\small\item\em List of possible expression tokens. \end{DoxyCompactList}
\item 
enum \hyperlink{parser_8h_ac721d0db2049edef01e62a2e63ff0472}{parser\+\_\+comp\+\_\+t} \{ {\bfseries M\+AX}, 
{\bfseries M\+IN}, 
{\bfseries E\+X\+A\+CT}
 \}\begin{DoxyCompactList}\small\item\em The comparator used to evaluate criteria values. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structparser__t}{parser\+\_\+t} $\ast$ \hyperlink{parser_8h_a570f8d50af35e4863518a619ef74d501}{parser\+\_\+parse} (char $\ast$expression\mbox{[}$\,$\mbox{]}, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Parses the string expression, converting it to a {\ttfamily \hyperlink{structparser__t}{parser\+\_\+t}} representation. \end{DoxyCompactList}\item 
void \hyperlink{parser_8h_a680ceeada57c4645e365ba1745d41181}{parser\+\_\+free} (\hyperlink{structparser__t}{parser\+\_\+t} $\ast$expression)
\begin{DoxyCompactList}\small\item\em Frees the memory allocated for a {\ttfamily \hyperlink{structparser__t}{parser\+\_\+t}} instance. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Parses a string expression and return a formal representation. 

Full unit test coverage 

\subsection{Typedef Documentation}
\index{parser.\+h@{parser.\+h}!parser\+\_\+t@{parser\+\_\+t}}
\index{parser\+\_\+t@{parser\+\_\+t}!parser.\+h@{parser.\+h}}
\subsubsection[{\texorpdfstring{parser\+\_\+t}{parser_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf parser\+\_\+t}  {\bf parser\+\_\+t}}\hypertarget{parser_8h_a402117b92426b41469190a0d4d4397f0}{}\label{parser_8h_a402117b92426b41469190a0d4d4397f0}


Formal expression representation. 

Contains the formal representation of the parsed expression in a ordered chained list. Each instance contains the information about a parsed expression token and the pointer to the {\ttfamily next} parsed expression token.

The order of the tokens in the chained list is not the same as the in the original string representation. Is has been reordered to encoded the priority of the operators and parenthesis in a infix notation 

\subsection{Enumeration Type Documentation}
\index{parser.\+h@{parser.\+h}!parser\+\_\+comp\+\_\+t@{parser\+\_\+comp\+\_\+t}}
\index{parser\+\_\+comp\+\_\+t@{parser\+\_\+comp\+\_\+t}!parser.\+h@{parser.\+h}}
\subsubsection[{\texorpdfstring{parser\+\_\+comp\+\_\+t}{parser_comp_t}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf parser\+\_\+comp\+\_\+t}}\hypertarget{parser_8h_ac721d0db2049edef01e62a2e63ff0472}{}\label{parser_8h_ac721d0db2049edef01e62a2e63ff0472}


The comparator used to evaluate criteria values. 

Calculated for criteria that accepts the +-\/ in the values.
\begin{DoxyItemize}
\item Example\+: {\ttfamily -\/\+S\+I\+ZE +20k} or {\ttfamily -\/\+N\+A\+ME -\/.\+txt}
\end{DoxyItemize}

\begin{DoxySeeAlso}{See also}
\hyperlink{structparser__t}{parser\+\_\+t} 
\end{DoxySeeAlso}


Definition at line 60 of file parser.\+h.

\index{parser.\+h@{parser.\+h}!parser\+\_\+crit\+\_\+t@{parser\+\_\+crit\+\_\+t}}
\index{parser\+\_\+crit\+\_\+t@{parser\+\_\+crit\+\_\+t}!parser.\+h@{parser.\+h}}
\subsubsection[{\texorpdfstring{parser\+\_\+crit\+\_\+t}{parser_crit_t}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf parser\+\_\+crit\+\_\+t}}\hypertarget{parser_8h_a4dcbe7148b91f50b0e7f3e08e780861d}{}\label{parser_8h_a4dcbe7148b91f50b0e7f3e08e780861d}


List of possible expression tokens. 

The enum values encode information\+:
\begin{DoxyItemize}
\item the 3 most significant bits hold the category (operator, criteria or parenthesis)
\item the 4 least significant bits hold the token order
\begin{DoxyItemize}
\item must start at 0 and be consecutive
\end{DoxyItemize}
\item operators are listed by priority A\+SC
\begin{DoxyItemize}
\item the encoded priority information is used in the parsing algorithm
\end{DoxyItemize}
\end{DoxyItemize}

\begin{DoxySeeAlso}{See also}
\hyperlink{parser_8h_a32088e9f194a33e050822b8c536e03cb}{parser\+\_\+crit\+\_\+type\+\_\+t} 

\hyperlink{structparser__t}{parser\+\_\+t} 
\end{DoxySeeAlso}


Definition at line 37 of file parser.\+h.

\index{parser.\+h@{parser.\+h}!parser\+\_\+crit\+\_\+type\+\_\+t@{parser\+\_\+crit\+\_\+type\+\_\+t}}
\index{parser\+\_\+crit\+\_\+type\+\_\+t@{parser\+\_\+crit\+\_\+type\+\_\+t}!parser.\+h@{parser.\+h}}
\subsubsection[{\texorpdfstring{parser\+\_\+crit\+\_\+type\+\_\+t}{parser_crit_type_t}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf parser\+\_\+crit\+\_\+type\+\_\+t}}\hypertarget{parser_8h_a32088e9f194a33e050822b8c536e03cb}{}\label{parser_8h_a32088e9f194a33e050822b8c536e03cb}


Type of expression token. 

Used to flag bitwise the {\ttfamily parser\+\_\+crit\+\_\+t} enum values, and later to obtain the category of a given {\ttfamily parser\+\_\+crit\+\_\+t} enum value

\begin{DoxySeeAlso}{See also}
\hyperlink{parser_8h_a4dcbe7148b91f50b0e7f3e08e780861d}{parser\+\_\+crit\+\_\+t} 
\end{DoxySeeAlso}


Definition at line 19 of file parser.\+h.



\subsection{Function Documentation}
\index{parser.\+h@{parser.\+h}!parser\+\_\+free@{parser\+\_\+free}}
\index{parser\+\_\+free@{parser\+\_\+free}!parser.\+h@{parser.\+h}}
\subsubsection[{\texorpdfstring{parser\+\_\+free(parser\+\_\+t $\ast$expression)}{parser_free(parser_t *expression)}}]{\setlength{\rightskip}{0pt plus 5cm}void parser\+\_\+free (
\begin{DoxyParamCaption}
\item[{{\bf parser\+\_\+t} $\ast$}]{expression}
\end{DoxyParamCaption}
)}\hypertarget{parser_8h_a680ceeada57c4645e365ba1745d41181}{}\label{parser_8h_a680ceeada57c4645e365ba1745d41181}


Frees the memory allocated for a {\ttfamily \hyperlink{structparser__t}{parser\+\_\+t}} instance. 

\begin{DoxySeeAlso}{See also}
\hyperlink{structparser__t}{parser\+\_\+t} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em expression} & The `parser\+\_\+t instance to free \\
\hline
\end{DoxyParams}


Definition at line 366 of file parser.\+c.

\index{parser.\+h@{parser.\+h}!parser\+\_\+parse@{parser\+\_\+parse}}
\index{parser\+\_\+parse@{parser\+\_\+parse}!parser.\+h@{parser.\+h}}
\subsubsection[{\texorpdfstring{parser\+\_\+parse(char $\ast$expression[], size\+\_\+t size)}{parser_parse(char *expression[], size_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf parser\+\_\+t}$\ast$ parser\+\_\+parse (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{expression\mbox{[}$\,$\mbox{]}, }
\item[{size\+\_\+t}]{size}
\end{DoxyParamCaption}
)}\hypertarget{parser_8h_a570f8d50af35e4863518a619ef74d501}{}\label{parser_8h_a570f8d50af35e4863518a619ef74d501}


Parses the string expression, converting it to a {\ttfamily \hyperlink{structparser__t}{parser\+\_\+t}} representation. 

This is done in multiple steps\+:
\begin{DoxyEnumerate}
\item tokens syntax is verified
\item criteria values units and comparison characters are verified
\item a object representation is created for each token
\item tokens are reordered to an infix notation encoding the operators priority and parenthesis
\end{DoxyEnumerate}

The algorithm used in step {\itshape 4} is based on the \href{https://en.wikipedia.org/wiki/Shunting-yard_algorithm}{\tt Shunting yard algorithm} (by Edsger Dijkstra). The original algorithm is intended to parse mathematical expressions and was adapt to parse our boolean expressions. \begin{DoxySeeAlso}{See also}
\hyperlink{structparser__t}{parser\+\_\+t}
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em expression} & The list of tokens forming the expression (space splitted) \\
\hline
{\em size} & The number of elements in {\ttfamily expression} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A {\ttfamily \hyperlink{structparser__t}{parser\+\_\+t}} representation of the expression, or {\itshape N\+U\+LL} is the expression is invalid 
\end{DoxyReturn}


Definition at line 339 of file parser.\+c.

